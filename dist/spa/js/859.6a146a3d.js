"use strict";(self["webpackChunkanimal_finder_client"]=self["webpackChunkanimal_finder_client"]||[]).push([[859],{27:(e,a,o)=>{o.d(a,{C:()=>l});const l={apiUrl:"http://172.17.0.2:3000"}},2859:(e,a,o)=>{o.r(a),o.d(a,{default:()=>L});var l=o(3673),s=o(8880),r=o(2323);const t=(0,l.Wm)("a",{href:"/"},"ANIMAL FINDER",-1),n={key:2,href:"#/account"},u=(0,l.Wm)("div",{class:"text-h6"},"Faca o login",-1),i=(0,l.Wm)("div",{class:"text-h6"},"Faca o seu cadastro",-1),d={key:0,class:"error--list"},p={key:0,class:"error--list"},m={key:0,class:"error--list"},c={key:0,class:"error--list"},g={key:0,class:"error--list"};function w(e,a,o,w,h,f){const y=(0,l.up)("q-toolbar-title"),k=(0,l.up)("q-toolbar"),W=(0,l.up)("q-header"),_=(0,l.up)("router-view"),v=(0,l.up)("q-page-container"),q=(0,l.up)("q-layout"),V=(0,l.up)("q-card-section"),j=(0,l.up)("q-input"),C=(0,l.up)("q-btn"),S=(0,l.up)("q-card-actions"),P=(0,l.up)("q-card"),Z=(0,l.up)("q-dialog"),b=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(l.HY,null,[(0,l.Wm)(q,{view:"lHh Lpr lFf"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{elevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"bg-grey-3 text-black"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[t])),_:1}),(0,l.Wm)("div",null,[e.logged?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("a",{key:0,href:"javascript: void(0)",onClick:a[1]||(a[1]=a=>e.loginPrompt=!0)}," Entrar ")),e.logged?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("a",{key:1,href:"javascript: void(0)",onClick:a[2]||(a[2]=a=>e.signupPrompt=!0)}," Cadastrar ")),e.logged?((0,l.wg)(),(0,l.j4)("a",n," Minha conta ")):(0,l.kq)("",!0),e.logged?((0,l.wg)(),(0,l.j4)("a",{key:3,href:"javascript: void(0)",class:"exit--link",onClick:a[3]||(a[3]=a=>e.doLogout())}," Sair ")):(0,l.kq)("",!0)])])),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_)])),_:1})])),_:1}),(0,l.Wm)(Z,{modelValue:e.loginPrompt,"onUpdate:modelValue":a[9]||(a[9]=a=>e.loginPrompt=a),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{style:{"min-width":"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(V,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dense:"",modelValue:e.user.email,"onUpdate:modelValue":a[4]||(a[4]=a=>e.user.email=a),placeholder:"Digite o seu email",autofocus:"",onKeyup:a[5]||(a[5]=(0,s.D2)((a=>e.doLogin()),["enter"]))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(V,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dense:"",modelValue:e.user.password,"onUpdate:modelValue":a[6]||(a[6]=a=>e.user.password=a),type:"password",placeholder:"Senha",autofocus:"",onKeyup:a[7]||(a[7]=(0,s.D2)((a=>e.doLogin()),["enter"]))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(S,{align:"right",class:"text-primary"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(C,{flat:"",label:"Cancelar"},null,512),[[b]]),(0,l.Wm)(C,{flat:"",label:"Entrar",onClick:a[8]||(a[8]=a=>e.doLogin())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Z,{modelValue:e.signupPrompt,"onUpdate:modelValue":a[21]||(a[21]=a=>e.signupPrompt=a),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{style:{"min-width":"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(V,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dense:"",modelValue:e.user.name,"onUpdate:modelValue":a[10]||(a[10]=a=>e.user.name=a),placeholder:"Digite o seu nome",autofocus:"",onKeyup:a[11]||(a[11]=(0,s.D2)((a=>e.validateSignup()),["enter"]))},null,8,["modelValue"]),e.user.errors.hasOwnProperty("name")?((0,l.wg)(),(0,l.j4)("ul",d,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.user.errors.name,(e=>((0,l.wg)(),(0,l.j4)("li",{key:e},(0,r.zw)(e),1)))),128))])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(V,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dense:"",modelValue:e.user.email,"onUpdate:modelValue":a[12]||(a[12]=a=>e.user.email=a),placeholder:"Digite o seu email",autofocus:"",onKeyup:a[13]||(a[13]=(0,s.D2)((a=>e.validateSignup()),["enter"]))},null,8,["modelValue"]),e.user.errors.hasOwnProperty("email")?((0,l.wg)(),(0,l.j4)("ul",p,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.user.errors.email,(e=>((0,l.wg)(),(0,l.j4)("li",{key:e},(0,r.zw)(e),1)))),128))])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(V,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dense:"",modelValue:e.user.password,"onUpdate:modelValue":a[14]||(a[14]=a=>e.user.password=a),type:"password",placeholder:"Senha",autofocus:"",onKeyup:a[15]||(a[15]=(0,s.D2)((a=>e.validateSignup()),["enter"]))},null,8,["modelValue"]),e.user.errors.hasOwnProperty("password")?((0,l.wg)(),(0,l.j4)("ul",m,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.user.errors.password,(e=>((0,l.wg)(),(0,l.j4)("li",{key:e},(0,r.zw)(e),1)))),128))])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(V,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dense:"",modelValue:e.user.password_2,"onUpdate:modelValue":a[16]||(a[16]=a=>e.user.password_2=a),type:"password",placeholder:"Repetir Senha",autofocus:"",onKeyup:a[17]||(a[17]=(0,s.D2)((a=>e.validateSignup()),["enter"]))},null,8,["modelValue"]),e.user.errors.hasOwnProperty("password_2")?((0,l.wg)(),(0,l.j4)("ul",c,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.user.errors.password_2,(e=>((0,l.wg)(),(0,l.j4)("li",{key:e},(0,r.zw)(e),1)))),128))])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(V,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dense:"",modelValue:e.user.phone,"onUpdate:modelValue":a[18]||(a[18]=a=>e.user.phone=a),placeholder:"Telefone",mask:"(##) ##### - ####",autofocus:"",onKeyup:a[19]||(a[19]=(0,s.D2)((a=>e.prompt=!1),["enter"]))},null,8,["modelValue"]),e.user.errors.hasOwnProperty("phone")?((0,l.wg)(),(0,l.j4)("ul",g,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.user.errors.phone,(e=>((0,l.wg)(),(0,l.j4)("li",{key:e},(0,r.zw)(e),1)))),128))])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(S,{align:"right",class:"text-primary"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(C,{flat:"",label:"Cancelar"},null,512),[[b]]),(0,l.Wm)(C,{flat:"",label:"Cadastrar",onClick:a[20]||(a[20]=a=>e.validateSignup())})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var h=o(27),f=o(6417);const y=o(52).default,k=h.C.apiUrl,W=(0,l.aZ)({name:"MainLayout",components:{},data(){return{data:{},user:{email:null,password:null,password_2:null,phone:null,errors:{}},loginPrompt:!1,logged:!1,signupPrompt:!1}},mounted(){const e=window.localStorage.getItem("token");this.logged=!!e},methods:{doLogin(){const e=JSON.stringify({user:this.user});y.post(k+"/api/v1/users/login",e,{headers:{"Content-Type":"application/json"}}).then((e=>{this.data=e.data,null==this.data.token?f.Z.create({type:"negative",message:"Usuario ou senha invalidos"}):(window.location.href="#/account?login=success",this.loginPrompt=!1,this.logged=!0,window.localStorage.setItem("token",this.data.token))}))},doLogout(){window.localStorage.clear("token"),this.logged=!1,window.location.href="#/"},validateSignup(){const e=this.user.password,a=this.user.password_2;e===a?this.doSignup():(this.user.errors={},this.user.errors.password_2=[],this.user.errors.password_2[0]="Senhas nao coincidem",console.log(this.user.errors))},doSignup(){const e=JSON.stringify({user:this.user});y.post(k+"/api/v1/users",e,{headers:{"Content-Type":"application/json"}}).then((e=>{f.Z.create({type:"positive",message:"Usuario cadastrado com sucesso, faca login para acessar a area restrita"}),this.user={email:null,password:null,password_2:null,phone:null,errors:{}},this.signupPrompt=!1})).catch((e=>{f.Z.create({type:"negative",message:"Erro ao salvar usuario"}),this.user.errors=e.response.data,console.log(this.user.errors.email)}))}}});var _=o(3066),v=o(3812),q=o(9570),V=o(3747),j=o(2652),C=o(2134),S=o(151),P=o(5589),Z=o(6805),b=o(9367),U=o(3187),D=o(677),K=o(7518),Q=o.n(K);W.render=w;const L=W;Q()(W,"components",{QLayout:_.Z,QHeader:v.Z,QToolbar:q.Z,QToolbarTitle:V.Z,QPageContainer:j.Z,QDialog:C.Z,QCard:S.Z,QCardSection:P.Z,QInput:Z.Z,QCardActions:b.Z,QBtn:U.Z}),Q()(W,"directives",{ClosePopup:D.Z})}}]);